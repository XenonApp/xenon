{"version":3,"sources":["../../../../src/config/default/command/paragraph.js"],"names":["session","xenon","movement","info","row","regex","command","line","go","callCommand","path","inputs","lines","match","module","exports","cursor","empty_line","select"],"mappings":";;AAAA,IAAIA,UAAUC,MAAMD,OAApB;;AAGA,SAASE,QAAT,CAAkBC,IAAlB,EAAwBC,GAAxB,EAA6BC,KAA7B,EAAoCC,OAApC,EAA6C;AACzC,QAAIC,OAAO,IAAX;AACA,OAAG;AACCH,eAAOD,KAAKK,EAAZ;AACAR,gBAAQS,WAAR,CAAoBN,KAAKO,IAAzB,EAA+BJ,OAA/B;AACAC,eAAOJ,KAAKQ,MAAL,CAAYC,KAAZ,CAAkBR,GAAlB,CAAP;AACH,KAJD,QAKOG,QAAQ,CAACA,KAAKM,KAAL,CAAWR,KAAX,CALhB;AAMA,WAAOD,GAAP;AACH;;AAGDU,OAAOC,OAAP,GAAiB,UAASZ,IAAT,EAAc;AAC3B,QAAIC,MAAMD,KAAKQ,MAAL,CAAYK,MAAZ,CAAmBZ,GAA7B;AACA,QAAIE,UAAUH,KAAKK,EAAL,GAAU,CAAV,GAAc,WAAd,GAA4B,aAA1C;AACA,QAAIS,aAAa,OAAjB;;AAEA;AACA,QAAId,KAAKQ,MAAL,CAAYC,KAAZ,CAAkBR,GAAlB,EAAuBS,KAAvB,CAA6BI,UAA7B,CAAJ,EAA8C;AAC1Cb,cAAMF,SAASC,IAAT,EAAeC,GAAf,EAAoB,IAApB,EAA0BE,OAA1B,CAAN;AACH;;AAED;AACAF,UAAMF,SAASC,IAAT,EAAeC,GAAf,EAAoBa,UAApB,EAAgCX,OAAhC,CAAN;;AAEA;AACAN,YAAQS,WAAR,CAAoBN,KAAKO,IAAzB,EAA+B,eAA/B;;AAEA,QAAIP,KAAKe,MAAT,EAAiB;AACbZ,kBAAUH,KAAKK,EAAL,GAAU,CAAV,GAAc,WAAd,GAA4B,aAAtC;AACAL,aAAKK,EAAL,IAAW,CAAC,CAAZ;AACAN,iBAASC,IAAT,EAAeC,GAAf,EAAoBa,UAApB,EAAgCX,OAAhC;AACH;AACJ,CArBD","file":"paragraph.js","sourcesContent":["var session = xenon.session;\n\n\nfunction movement(info, row, regex, command) {\n    var line = true;\n    do {\n        row += info.go;\n        session.callCommand(info.path, command);\n        line = info.inputs.lines[row];\n    }\n    while (line && !line.match(regex));\n    return row;\n}\n\n\nmodule.exports = function(info){\n    var row = info.inputs.cursor.row;\n    var command = info.go < 0 ? \"Cursor:Up\" : \"Cursor:Down\";\n    var empty_line = /^\\s*$/;\n\n    // If we're on an empty line, move to the first non-empty.\n    if (info.inputs.lines[row].match(empty_line)) {\n        row = movement(info, row, /\\S/, command);\n    }\n\n    // Continue moving to the next empty line.\n    row = movement(info, row, empty_line, command);\n\n    // FIXME: This is a workaround for the cursor going off the screen.\n    session.callCommand(info.path, \"Cursor:Center\");\n\n    if (info.select) {\n        command = info.go > 0 ? \"Select:Up\" : \"Select:Down\";\n        info.go *= -1;\n        movement(info, row, empty_line, command);\n    }\n};\n"]}