{"version":3,"sources":["../../../../../src/config/api/zed/lib/beautify.js"],"names":["session","require","module","exports","path","beautifier","wholeDocument","selectionRange","getSelectionRange","then","selectionRange_","start","row","end","column","getText","beautifyText","getTextRange","text","Promise","resolve","beautified","setText","replaceRange"],"mappings":";;AAAA,IAAIA,UAAUC,QAAQ,YAAR,CAAd;;AAEAC,OAAOC,OAAP,GAAiB,UAASC,IAAT,EAAeC,UAAf,EAA2B;AACxC,QAAIC,gBAAgB,KAApB;AAAA,QACIC,cADJ;;AAGA,WAAOP,QAAQQ,iBAAR,CAA0BJ,IAA1B,EAAgCK,IAAhC,CAAqC,UAASC,eAAT,EAA0B;AAClEH,yBAAiBG,eAAjB;AACA,YAAIH,eAAeI,KAAf,CAAqBC,GAArB,KAA6BL,eAAeM,GAAf,CAAmBD,GAAhD,IAAuDL,eAAeI,KAAf,CAAqBG,MAArB,KAAgCP,eAAeM,GAAf,CAAmBC,MAA9G,EAAsH;AAClHR,4BAAgB,IAAhB;AACH,SAFD,MAEO;AACHC,2BAAeI,KAAf,CAAqBG,MAArB,GAA8B,CAA9B;AACAP,2BAAeM,GAAf,CAAmBC,MAAnB,GAA4B,IAA5B;AACH;;AAED,YAAIR,aAAJ,EAAmB;AACf,mBAAON,QAAQe,OAAR,CAAgBX,IAAhB,EAAsBK,IAAtB,CAA2BO,YAA3B,CAAP;AACH,SAFD,MAEO;AACH,mBAAOhB,QAAQiB,YAAR,CAAqBb,IAArB,EAA2BG,eAAeI,KAA1C,EAAiDJ,eAAeM,GAAhE,EAAqEJ,IAArE,CAA0EO,YAA1E,CAAP;AACH;AACJ,KAdM,CAAP;;AAgBA,aAASA,YAAT,CAAsBE,IAAtB,EAA4B;AACxB,eAAOC,QAAQC,OAAR,CAAgBF,IAAhB,EAAsBT,IAAtB,CAA2BJ,UAA3B,EAAuCI,IAAvC,CAA4C,UAASY,UAAT,EAAqB;AACpE,gBAAIf,aAAJ,EAAmB;AACf,uBAAON,QAAQsB,OAAR,CAAgBlB,IAAhB,EAAsBiB,UAAtB,CAAP;AACH,aAFD,MAEO;AACH,uBAAOrB,QAAQuB,YAAR,CAAqBnB,IAArB,EAA2BG,cAA3B,EAA2Cc,UAA3C,CAAP;AACH;AACJ,SANM,CAAP;AAOH;AACJ,CA7BD","file":"beautify.js","sourcesContent":["var session = require(\"../session\");\n\nmodule.exports = function(path, beautifier) {\n    var wholeDocument = false,\n        selectionRange;\n\n    return session.getSelectionRange(path).then(function(selectionRange_) {\n        selectionRange = selectionRange_;\n        if (selectionRange.start.row === selectionRange.end.row && selectionRange.start.column === selectionRange.end.column) {\n            wholeDocument = true;\n        } else {\n            selectionRange.start.column = 0;\n            selectionRange.end.column = 1024;\n        }\n\n        if (wholeDocument) {\n            return session.getText(path).then(beautifyText);\n        } else {\n            return session.getTextRange(path, selectionRange.start, selectionRange.end).then(beautifyText);\n        }\n    });\n\n    function beautifyText(text) {\n        return Promise.resolve(text).then(beautifier).then(function(beautified) {\n            if (wholeDocument) {\n                return session.setText(path, beautified);\n            } else {\n                return session.replaceRange(path, selectionRange, beautified);\n            }\n        });\n    }\n};\n"]}