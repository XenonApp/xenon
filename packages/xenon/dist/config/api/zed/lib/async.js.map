{"version":3,"sources":["../../../../../src/config/api/zed/lib/async.js"],"names":["async","root","previous_async","noConflict","only_once","fn","called","Error","apply","arguments","_each","arr","iterator","forEach","i","length","_map","map","results","x","a","push","_reduce","memo","reduce","_keys","obj","Object","keys","k","hasOwnProperty","process","nextTick","setImmediate","setTimeout","each","callback","completed","err","eachSeries","iterate","forEachSeries","eachLimit","limit","_eachLimit","forEachLimit","started","running","replenish","doParallel","args","Array","prototype","slice","call","concat","doParallelLimit","doSeries","_asyncMap","eachfn","index","value","v","mapSeries","mapLimit","_mapLimit","inject","foldl","reduceRight","reversed","reverse","foldr","_filter","sort","b","filter","filterSeries","select","selectSeries","_reject","reject","rejectSeries","_detect","main_callback","result","detect","detectSeries","some","any","every","all","sortBy","criteria","left","right","auto","tasks","listeners","addListener","unshift","removeListener","splice","taskComplete","task","Function","taskCallback","safeResults","rkey","requires","Math","abs","ready","listener","waterfall","constructor","wrapIterator","next","_parallel","parallel","parallelLimit","series","makeCallback","_concat","r","cb","y","concatSeries","whilst","test","doWhilst","until","doUntil","queue","worker","concurrency","undefined","_insert","q","data","pos","item","saturated","workers","empty","drain","shift","cargo","payload","working","ts","ds","_console_fn","name","console","error","log","dir","memoize","hasher","queues","memoized","pop","key","l","unmemoized","unmemoize","times","count","counter","timesSeries","compose","fns","that","newargs","nextargs","_applyEach","go","applyEach","applyEachSeries","forever","define","amd","module","exports"],"mappings":"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","file":"async.js","sourcesContent":["/*global setImmediate: false, setTimeout: false, console: false */\n(function() {\n    var async = {};\n\n    // global on the server, window in the browser\n    var root, previous_async;\n\n    root = this;\n    if (root != null) {\n        previous_async = root.async;\n    }\n\n    async.noConflict = function() {\n        root.async = previous_async;\n        return async;\n    };\n\n    function only_once(fn) {\n        var called = false;\n        return function() {\n            if (called) throw new Error(\"Callback was already called.\");\n            called = true;\n            fn.apply(root, arguments);\n        }\n    }\n\n    //// cross-browser compatiblity functions ////\n\n    var _each = function(arr, iterator) {\n        if (arr.forEach) {\n            return arr.forEach(iterator);\n        }\n        for (var i = 0; i < arr.length; i += 1) {\n            iterator(arr[i], i, arr);\n        }\n    };\n\n    var _map = function(arr, iterator) {\n        if (arr.map) {\n            return arr.map(iterator);\n        }\n        var results = [];\n        _each(arr, function(x, i, a) {\n            results.push(iterator(x, i, a));\n        });\n        return results;\n    };\n\n    var _reduce = function(arr, iterator, memo) {\n        if (arr.reduce) {\n            return arr.reduce(iterator, memo);\n        }\n        _each(arr, function(x, i, a) {\n            memo = iterator(memo, x, i, a);\n        });\n        return memo;\n    };\n\n    var _keys = function(obj) {\n        if (Object.keys) {\n            return Object.keys(obj);\n        }\n        var keys = [];\n        for (var k in obj) {\n            if (obj.hasOwnProperty(k)) {\n                keys.push(k);\n            }\n        }\n        return keys;\n    };\n\n    //// exported async module functions ////\n\n    //// nextTick implementation with browser-compatible fallback ////\n    if (typeof process === 'undefined' || !(process.nextTick)) {\n        if (typeof setImmediate === 'function') {\n            async.nextTick = function(fn) {\n                // not a direct alias for IE10 compatibility\n                setImmediate(fn);\n            };\n            async.setImmediate = async.nextTick;\n        } else {\n            async.nextTick = function(fn) {\n                setTimeout(fn, 0);\n            };\n            async.setImmediate = async.nextTick;\n        }\n    } else {\n        async.nextTick = process.nextTick;\n        if (typeof setImmediate !== 'undefined') {\n            async.setImmediate = setImmediate;\n        } else {\n            async.setImmediate = async.nextTick;\n        }\n    }\n\n    async.each = function(arr, iterator, callback) {\n        callback = callback || function() {};\n        if (!arr.length) {\n            return callback();\n        }\n        var completed = 0;\n        _each(arr, function(x) {\n            iterator(x, only_once(function(err) {\n                if (err) {\n                    callback(err);\n                    callback = function() {};\n                } else {\n                    completed += 1;\n                    if (completed >= arr.length) {\n                        callback(null);\n                    }\n                }\n            }));\n        });\n    };\n    async.forEach = async.each;\n\n    async.eachSeries = function(arr, iterator, callback) {\n        callback = callback || function() {};\n        if (!arr.length) {\n            return callback();\n        }\n        var completed = 0;\n        var iterate = function() {\n            iterator(arr[completed], function(err) {\n                if (err) {\n                    callback(err);\n                    callback = function() {};\n                } else {\n                    completed += 1;\n                    if (completed >= arr.length) {\n                        callback(null);\n                    } else {\n                        iterate();\n                    }\n                }\n            });\n        };\n        iterate();\n    };\n    async.forEachSeries = async.eachSeries;\n\n    async.eachLimit = function(arr, limit, iterator, callback) {\n        var fn = _eachLimit(limit);\n        fn.apply(null, [arr, iterator, callback]);\n    };\n    async.forEachLimit = async.eachLimit;\n\n    var _eachLimit = function(limit) {\n\n        return function(arr, iterator, callback) {\n            callback = callback || function() {};\n            if (!arr.length || limit <= 0) {\n                return callback();\n            }\n            var completed = 0;\n            var started = 0;\n            var running = 0;\n\n            (function replenish() {\n                if (completed >= arr.length) {\n                    return callback();\n                }\n\n                while (running < limit && started < arr.length) {\n                    started += 1;\n                    running += 1;\n                    iterator(arr[started - 1], function(err) {\n                        if (err) {\n                            callback(err);\n                            callback = function() {};\n                        } else {\n                            completed += 1;\n                            running -= 1;\n                            if (completed >= arr.length) {\n                                callback();\n                            } else {\n                                replenish();\n                            }\n                        }\n                    });\n                }\n            })();\n        };\n    };\n\n\n    var doParallel = function(fn) {\n        return function() {\n            var args = Array.prototype.slice.call(arguments);\n            return fn.apply(null, [async.each].concat(args));\n        };\n    };\n    var doParallelLimit = function(limit, fn) {\n        return function() {\n            var args = Array.prototype.slice.call(arguments);\n            return fn.apply(null, [_eachLimit(limit)].concat(args));\n        };\n    };\n    var doSeries = function(fn) {\n        return function() {\n            var args = Array.prototype.slice.call(arguments);\n            return fn.apply(null, [async.eachSeries].concat(args));\n        };\n    };\n\n\n    var _asyncMap = function(eachfn, arr, iterator, callback) {\n        var results = [];\n        arr = _map(arr, function(x, i) {\n            return {\n                index: i,\n                value: x\n            };\n        });\n        eachfn(arr, function(x, callback) {\n            iterator(x.value, function(err, v) {\n                results[x.index] = v;\n                callback(err);\n            });\n        }, function(err) {\n            callback(err, results);\n        });\n    };\n    async.map = doParallel(_asyncMap);\n    async.mapSeries = doSeries(_asyncMap);\n    async.mapLimit = function(arr, limit, iterator, callback) {\n        return _mapLimit(limit)(arr, iterator, callback);\n    };\n\n    var _mapLimit = function(limit) {\n        return doParallelLimit(limit, _asyncMap);\n    };\n\n    // reduce only has a series version, as doing reduce in parallel won't\n    // work in many situations.\n    async.reduce = function(arr, memo, iterator, callback) {\n        async.eachSeries(arr, function(x, callback) {\n            iterator(memo, x, function(err, v) {\n                memo = v;\n                callback(err);\n            });\n        }, function(err) {\n            callback(err, memo);\n        });\n    };\n    // inject alias\n    async.inject = async.reduce;\n    // foldl alias\n    async.foldl = async.reduce;\n\n    async.reduceRight = function(arr, memo, iterator, callback) {\n        var reversed = _map(arr, function(x) {\n            return x;\n        }).reverse();\n        async.reduce(reversed, memo, iterator, callback);\n    };\n    // foldr alias\n    async.foldr = async.reduceRight;\n\n    var _filter = function(eachfn, arr, iterator, callback) {\n        var results = [];\n        arr = _map(arr, function(x, i) {\n            return {\n                index: i,\n                value: x\n            };\n        });\n        eachfn(arr, function(x, callback) {\n            iterator(x.value, function(v) {\n                if (v) {\n                    results.push(x);\n                }\n                callback();\n            });\n        }, function(err) {\n            callback(_map(results.sort(function(a, b) {\n                return a.index - b.index;\n            }), function(x) {\n                return x.value;\n            }));\n        });\n    };\n    async.filter = doParallel(_filter);\n    async.filterSeries = doSeries(_filter);\n    // select alias\n    async.select = async.filter;\n    async.selectSeries = async.filterSeries;\n\n    var _reject = function(eachfn, arr, iterator, callback) {\n        var results = [];\n        arr = _map(arr, function(x, i) {\n            return {\n                index: i,\n                value: x\n            };\n        });\n        eachfn(arr, function(x, callback) {\n            iterator(x.value, function(v) {\n                if (!v) {\n                    results.push(x);\n                }\n                callback();\n            });\n        }, function(err) {\n            callback(_map(results.sort(function(a, b) {\n                return a.index - b.index;\n            }), function(x) {\n                return x.value;\n            }));\n        });\n    };\n    async.reject = doParallel(_reject);\n    async.rejectSeries = doSeries(_reject);\n\n    var _detect = function(eachfn, arr, iterator, main_callback) {\n        eachfn(arr, function(x, callback) {\n            iterator(x, function(result) {\n                if (result) {\n                    main_callback(x);\n                    main_callback = function() {};\n                } else {\n                    callback();\n                }\n            });\n        }, function(err) {\n            main_callback();\n        });\n    };\n    async.detect = doParallel(_detect);\n    async.detectSeries = doSeries(_detect);\n\n    async.some = function(arr, iterator, main_callback) {\n        async.each(arr, function(x, callback) {\n            iterator(x, function(v) {\n                if (v) {\n                    main_callback(true);\n                    main_callback = function() {};\n                }\n                callback();\n            });\n        }, function(err) {\n            main_callback(false);\n        });\n    };\n    // any alias\n    async.any = async.some;\n\n    async.every = function(arr, iterator, main_callback) {\n        async.each(arr, function(x, callback) {\n            iterator(x, function(v) {\n                if (!v) {\n                    main_callback(false);\n                    main_callback = function() {};\n                }\n                callback();\n            });\n        }, function(err) {\n            main_callback(true);\n        });\n    };\n    // all alias\n    async.all = async.every;\n\n    async.sortBy = function(arr, iterator, callback) {\n        async.map(arr, function(x, callback) {\n            iterator(x, function(err, criteria) {\n                if (err) {\n                    callback(err);\n                } else {\n                    callback(null, {\n                        value: x,\n                        criteria: criteria\n                    });\n                }\n            });\n        }, function(err, results) {\n            if (err) {\n                return callback(err);\n            } else {\n                var fn = function(left, right) {\n                    var a = left.criteria,\n                        b = right.criteria;\n                    return a < b ? -1 : a > b ? 1 : 0;\n                };\n                callback(null, _map(results.sort(fn), function(x) {\n                    return x.value;\n                }));\n            }\n        });\n    };\n\n    async.auto = function(tasks, callback) {\n        callback = callback || function() {};\n        var keys = _keys(tasks);\n        if (!keys.length) {\n            return callback(null);\n        }\n\n        var results = {};\n\n        var listeners = [];\n        var addListener = function(fn) {\n            listeners.unshift(fn);\n        };\n        var removeListener = function(fn) {\n            for (var i = 0; i < listeners.length; i += 1) {\n                if (listeners[i] === fn) {\n                    listeners.splice(i, 1);\n                    return;\n                }\n            }\n        };\n        var taskComplete = function() {\n            _each(listeners.slice(0), function(fn) {\n                fn();\n            });\n        };\n\n        addListener(function() {\n            if (_keys(results).length === keys.length) {\n                callback(null, results);\n                callback = function() {};\n            }\n        });\n\n        _each(keys, function(k) {\n            var task = (tasks[k] instanceof Function) ? [tasks[k]] : tasks[k];\n            var taskCallback = function(err) {\n                var args = Array.prototype.slice.call(arguments, 1);\n                if (args.length <= 1) {\n                    args = args[0];\n                }\n                if (err) {\n                    var safeResults = {};\n                    _each(_keys(results), function(rkey) {\n                        safeResults[rkey] = results[rkey];\n                    });\n                    safeResults[k] = args;\n                    callback(err, safeResults);\n                    // stop subsequent errors hitting callback multiple times\n                    callback = function() {};\n                } else {\n                    results[k] = args;\n                    async.setImmediate(taskComplete);\n                }\n            };\n            var requires = task.slice(0, Math.abs(task.length - 1)) || [];\n            var ready = function() {\n                return _reduce(requires, function(a, x) {\n                    return (a && results.hasOwnProperty(x));\n                }, true) && !results.hasOwnProperty(k);\n            };\n            if (ready()) {\n                task[task.length - 1](taskCallback, results);\n            } else {\n                var listener = function() {\n                    if (ready()) {\n                        removeListener(listener);\n                        task[task.length - 1](taskCallback, results);\n                    }\n                };\n                addListener(listener);\n            }\n        });\n    };\n\n    async.waterfall = function(tasks, callback) {\n        callback = callback || function() {};\n        if (tasks.constructor !== Array) {\n            var err = new Error('First argument to waterfall must be an array of functions');\n            return callback(err);\n        }\n        if (!tasks.length) {\n            return callback();\n        }\n        var wrapIterator = function(iterator) {\n            return function(err) {\n                if (err) {\n                    callback.apply(null, arguments);\n                    callback = function() {};\n                } else {\n                    var args = Array.prototype.slice.call(arguments, 1);\n                    var next = iterator.next();\n                    if (next) {\n                        args.push(wrapIterator(next));\n                    } else {\n                        args.push(callback);\n                    }\n                    async.setImmediate(function() {\n                        iterator.apply(null, args);\n                    });\n                }\n            };\n        };\n        wrapIterator(async.iterator(tasks))();\n    };\n\n    var _parallel = function(eachfn, tasks, callback) {\n        callback = callback || function() {};\n        if (tasks.constructor === Array) {\n            eachfn.map(tasks, function(fn, callback) {\n                if (fn) {\n                    fn(function(err) {\n                        var args = Array.prototype.slice.call(arguments, 1);\n                        if (args.length <= 1) {\n                            args = args[0];\n                        }\n                        callback.call(null, err, args);\n                    });\n                }\n            }, callback);\n        } else {\n            var results = {};\n            eachfn.each(_keys(tasks), function(k, callback) {\n                tasks[k](function(err) {\n                    var args = Array.prototype.slice.call(arguments, 1);\n                    if (args.length <= 1) {\n                        args = args[0];\n                    }\n                    results[k] = args;\n                    callback(err);\n                });\n            }, function(err) {\n                callback(err, results);\n            });\n        }\n    };\n\n    async.parallel = function(tasks, callback) {\n        _parallel({\n            map: async.map,\n            each: async.each\n        }, tasks, callback);\n    };\n\n    async.parallelLimit = function(tasks, limit, callback) {\n        _parallel({\n            map: _mapLimit(limit),\n            each: _eachLimit(limit)\n        }, tasks, callback);\n    };\n\n    async.series = function(tasks, callback) {\n        callback = callback || function() {};\n        if (tasks.constructor === Array) {\n            async.mapSeries(tasks, function(fn, callback) {\n                if (fn) {\n                    fn(function(err) {\n                        var args = Array.prototype.slice.call(arguments, 1);\n                        if (args.length <= 1) {\n                            args = args[0];\n                        }\n                        callback.call(null, err, args);\n                    });\n                }\n            }, callback);\n        } else {\n            var results = {};\n            async.eachSeries(_keys(tasks), function(k, callback) {\n                tasks[k](function(err) {\n                    var args = Array.prototype.slice.call(arguments, 1);\n                    if (args.length <= 1) {\n                        args = args[0];\n                    }\n                    results[k] = args;\n                    callback(err);\n                });\n            }, function(err) {\n                callback(err, results);\n            });\n        }\n    };\n\n    async.iterator = function(tasks) {\n        var makeCallback = function(index) {\n            var fn = function() {\n                if (tasks.length) {\n                    tasks[index].apply(null, arguments);\n                }\n                return fn.next();\n            };\n            fn.next = function() {\n                return (index < tasks.length - 1) ? makeCallback(index + 1) : null;\n            };\n            return fn;\n        };\n        return makeCallback(0);\n    };\n\n    async.apply = function(fn) {\n        var args = Array.prototype.slice.call(arguments, 1);\n        return function() {\n            return fn.apply(\n            null, args.concat(Array.prototype.slice.call(arguments)));\n        };\n    };\n\n    var _concat = function(eachfn, arr, fn, callback) {\n        var r = [];\n        eachfn(arr, function(x, cb) {\n            fn(x, function(err, y) {\n                r = r.concat(y || []);\n                cb(err);\n            });\n        }, function(err) {\n            callback(err, r);\n        });\n    };\n    async.concat = doParallel(_concat);\n    async.concatSeries = doSeries(_concat);\n\n    async.whilst = function(test, iterator, callback) {\n        if (test()) {\n            iterator(function(err) {\n                if (err) {\n                    return callback(err);\n                }\n                async.whilst(test, iterator, callback);\n            });\n        } else {\n            callback();\n        }\n    };\n\n    async.doWhilst = function(iterator, test, callback) {\n        iterator(function(err) {\n            if (err) {\n                return callback(err);\n            }\n            if (test()) {\n                async.doWhilst(iterator, test, callback);\n            } else {\n                callback();\n            }\n        });\n    };\n\n    async.until = function(test, iterator, callback) {\n        if (!test()) {\n            iterator(function(err) {\n                if (err) {\n                    return callback(err);\n                }\n                async.until(test, iterator, callback);\n            });\n        } else {\n            callback();\n        }\n    };\n\n    async.doUntil = function(iterator, test, callback) {\n        iterator(function(err) {\n            if (err) {\n                return callback(err);\n            }\n            if (!test()) {\n                async.doUntil(iterator, test, callback);\n            } else {\n                callback();\n            }\n        });\n    };\n\n    async.queue = function(worker, concurrency) {\n        if (concurrency === undefined) {\n            concurrency = 1;\n        }\n\n        function _insert(q, data, pos, callback) {\n            if (data.constructor !== Array) {\n                data = [data];\n            }\n            _each(data, function(task) {\n                var item = {\n                    data: task,\n                    callback: typeof callback === 'function' ? callback : null\n                };\n\n                if (pos) {\n                    q.tasks.unshift(item);\n                } else {\n                    q.tasks.push(item);\n                }\n\n                if (q.saturated && q.tasks.length === concurrency) {\n                    q.saturated();\n                }\n                async.setImmediate(q.process);\n            });\n        }\n\n        var workers = 0;\n        var q = {\n            tasks: [],\n            concurrency: concurrency,\n            saturated: null,\n            empty: null,\n            drain: null,\n            push: function(data, callback) {\n                _insert(q, data, false, callback);\n            },\n            unshift: function(data, callback) {\n                _insert(q, data, true, callback);\n            },\n            process: function() {\n                if (workers < q.concurrency && q.tasks.length) {\n                    var task = q.tasks.shift();\n                    if (q.empty && q.tasks.length === 0) {\n                        q.empty();\n                    }\n                    workers += 1;\n                    var next = function() {\n                        workers -= 1;\n                        if (task.callback) {\n                            task.callback.apply(task, arguments);\n                        }\n                        if (q.drain && q.tasks.length + workers === 0) {\n                            q.drain();\n                        }\n                        q.process();\n                    };\n                    var cb = only_once(next);\n                    worker(task.data, cb);\n                }\n            },\n            length: function() {\n                return q.tasks.length;\n            },\n            running: function() {\n                return workers;\n            }\n        };\n        return q;\n    };\n\n    async.cargo = function(worker, payload) {\n        var working = false,\n            tasks = [];\n\n        var cargo = {\n            tasks: tasks,\n            payload: payload,\n            saturated: null,\n            empty: null,\n            drain: null,\n            push: function(data, callback) {\n                if (data.constructor !== Array) {\n                    data = [data];\n                }\n                _each(data, function(task) {\n                    tasks.push({\n                        data: task,\n                        callback: typeof callback === 'function' ? callback : null\n                    });\n                    if (cargo.saturated && tasks.length === payload) {\n                        cargo.saturated();\n                    }\n                });\n                async.setImmediate(cargo.process);\n            },\n            process: function process() {\n                if (working) return;\n                if (tasks.length === 0) {\n                    if (cargo.drain) cargo.drain();\n                    return;\n                }\n\n                var ts = typeof payload === 'number' ? tasks.splice(0, payload) : tasks.splice(0);\n\n                var ds = _map(ts, function(task) {\n                    return task.data;\n                });\n\n                if (cargo.empty) cargo.empty();\n                working = true;\n                worker(ds, function() {\n                    working = false;\n\n                    var args = arguments;\n                    _each(ts, function(data) {\n                        if (data.callback) {\n                            data.callback.apply(null, args);\n                        }\n                    });\n\n                    process();\n                });\n            },\n            length: function() {\n                return tasks.length;\n            },\n            running: function() {\n                return working;\n            }\n        };\n        return cargo;\n    };\n\n    var _console_fn = function(name) {\n        return function(fn) {\n            var args = Array.prototype.slice.call(arguments, 1);\n            fn.apply(null, args.concat([function(err) {\n                var args = Array.prototype.slice.call(arguments, 1);\n                if (typeof console !== 'undefined') {\n                    if (err) {\n                        if (console.error) {\n                            console.error(err);\n                        }\n                    } else if (console[name]) {\n                        _each(args, function(x) {\n                            console[name](x);\n                        });\n                    }\n                }\n            }]));\n        };\n    };\n    async.log = _console_fn('log');\n    async.dir = _console_fn('dir');\n    /*async.info = _console_fn('info');\n    async.warn = _console_fn('warn');\n    async.error = _console_fn('error');*/\n\n    async.memoize = function(fn, hasher) {\n        var memo = {};\n        var queues = {};\n        hasher = hasher || function(x) {\n            return x;\n        };\n        var memoized = function() {\n            var args = Array.prototype.slice.call(arguments);\n            var callback = args.pop();\n            var key = hasher.apply(null, args);\n            if (key in memo) {\n                callback.apply(null, memo[key]);\n            } else if (key in queues) {\n                queues[key].push(callback);\n            } else {\n                queues[key] = [callback];\n                fn.apply(null, args.concat([function() {\n                    memo[key] = arguments;\n                    var q = queues[key];\n                    delete queues[key];\n                    for (var i = 0, l = q.length; i < l; i++) {\n                        q[i].apply(null, arguments);\n                    }\n                }]));\n            }\n        };\n        memoized.memo = memo;\n        memoized.unmemoized = fn;\n        return memoized;\n    };\n\n    async.unmemoize = function(fn) {\n        return function() {\n            return (fn.unmemoized || fn).apply(null, arguments);\n        };\n    };\n\n    async.times = function(count, iterator, callback) {\n        var counter = [];\n        for (var i = 0; i < count; i++) {\n            counter.push(i);\n        }\n        return async.map(counter, iterator, callback);\n    };\n\n    async.timesSeries = function(count, iterator, callback) {\n        var counter = [];\n        for (var i = 0; i < count; i++) {\n            counter.push(i);\n        }\n        return async.mapSeries(counter, iterator, callback);\n    };\n\n    async.compose = function( /* functions... */ ) {\n        var fns = Array.prototype.reverse.call(arguments);\n        return function() {\n            var that = this;\n            var args = Array.prototype.slice.call(arguments);\n            var callback = args.pop();\n            async.reduce(fns, args, function(newargs, fn, cb) {\n                fn.apply(that, newargs.concat([function() {\n                    var err = arguments[0];\n                    var nextargs = Array.prototype.slice.call(arguments, 1);\n                    cb(err, nextargs);\n                }]))\n            },\n\n            function(err, results) {\n                callback.apply(that, [err].concat(results));\n            });\n        };\n    };\n\n    var _applyEach = function(eachfn, fns /*args...*/ ) {\n        var go = function() {\n            var that = this;\n            var args = Array.prototype.slice.call(arguments);\n            var callback = args.pop();\n            return eachfn(fns, function(fn, cb) {\n                fn.apply(that, args.concat([cb]));\n            },\n            callback);\n        };\n        if (arguments.length > 2) {\n            var args = Array.prototype.slice.call(arguments, 2);\n            return go.apply(this, args);\n        } else {\n            return go;\n        }\n    };\n    async.applyEach = doParallel(_applyEach);\n    async.applyEachSeries = doSeries(_applyEach);\n\n    async.forever = function(fn, callback) {\n        function next(err) {\n            if (err) {\n                if (callback) {\n                    return callback(err);\n                }\n                throw err;\n            }\n            fn(next);\n        }\n        next();\n    };\n\n    // AMD / RequireJS\n    if (typeof define !== 'undefined' && define.amd) {\n        define(function() {\n            return async;\n        });\n    }\n    // Node.js\n    else if (typeof module !== 'undefined' && module.exports) {\n        module.exports = async;\n    }\n    // included directly via <script> tag\n    else {\n        root.async = async;\n    }\n\n}());"]}