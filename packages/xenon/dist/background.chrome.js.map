{"version":3,"sources":["../src/background.chrome.js"],"names":["isLinux","exec","navigator","platform","openEditor","title","url","urlPostfix","Promise","resolve","reject","chrome","app","window","create","encodeURIComponent","frame","width","height","win","focus","showWindow","runtime","onLaunched","addListener","restoreOpenWindows","ongoingTextAreaEdits","onConnectExternal","port","id","Date","now","onMessage","req","text","undefined","then","onClosed","disconnect","onDisconnect","setTextAreaText","postMessage","timeOut","reconnectTimeout","pingInterval","pongTimeout","editorSocketConn","currentSocketOptions","initEditorSocket","server","createUUID","s","hexDigits","i","substr","Math","floor","random","uuid","join","storage","sync","get","results","userKey","zedremUserKey","set","editorSocket","closeSocket","status","clearTimeout","clearInterval","onclose","close","zedremConfig","console","log","WebSocket","onopen","send","JSON","stringify","version","UUID","setInterval","type","setTimeout","onerror","err","error","onmessage","e","message","data","parse","replace","configZedrem","newServer","openProjects","ignoreClose","openProject","contentWindow","zed","services","editor","getActiveEditor","loadProject","registerWindow","lastFocus","addEventListener","saveOpenWindows","getOpenWindows","wins","Object","keys","forEach","push","sort","a","b","closeAllWindows","getSocketOptions","local","openWindows","length","result"],"mappings":"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","file":"background.chrome.js","sourcesContent":["/*global chrome*/\n\nvar isLinux = !! /linux/i.exec(navigator.platform);\n// var isLinux = false;\n\nfunction openEditor(title, url, urlPostfix) {\n    urlPostfix = urlPostfix || \"\";\n    return new Promise(function(resolve, reject) {\n        chrome.app.window.create('editor.chrome.html?url=' + encodeURIComponent(url) + '&title=' + encodeURIComponent(title) + urlPostfix, {\n            frame: isLinux ? 'chrome' : 'none',\n            width: 1024,\n            height: 768\n        }, function(win) {\n            win.focus();\n            resolve(win);\n        });\n    });\n}\n\nfunction showWindow() {\n    openEditor(\"Zed\", \"\");\n}\n\nchrome.app.runtime.onLaunched.addListener(restoreOpenWindows);\n\nvar ongoingTextAreaEdits = {};\n\nchrome.runtime.onConnectExternal.addListener(function(port) {\n    var id = \"\" + Date.now();\n    ongoingTextAreaEdits[id] = port;\n    port.onMessage.addListener(function(req) {\n        if (req.text !== undefined) {\n            openEditor(\"Edit Text Area\", \"textarea:\" + req.text, \"&id=\" + id).then(function(win) {\n                win.onClosed.addListener(function() {\n                    port.disconnect();\n                    delete ongoingTextAreaEdits[id];\n                });\n            });\n        }\n    });\n    port.onDisconnect.addListener(function() {\n        delete ongoingTextAreaEdits[id];\n    });\n});\n\nwindow.setTextAreaText = function(id, text) {\n    ongoingTextAreaEdits[id].postMessage({\n        text: text\n    });\n};\n\n\n// Editor socket\n// TODO: Factor this out somehow\nvar timeOut = 2000;\nvar reconnectTimeout = null;\nvar pingInterval = null;\nvar pongTimeout = null;\nvar editorSocketConn;\nvar currentSocketOptions = {};\n\nfunction initEditorSocket(server) {\n    function createUUID() {\n        var s = [];\n        var hexDigits = \"0123456789ABCDEF\";\n        for (var i = 0; i < 32; i++) {\n            s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);\n        }\n        s[12] = \"4\";\n        s[16] = hexDigits.substr((s[16] & 0x3) | 0x8, 1);\n\n        var uuid = s.join(\"\");\n        return uuid;\n    }\n\n    chrome.storage.sync.get(\"zedremUserKey\", function(results) {\n        var userKey = results.zedremUserKey;\n        if (!userKey) {\n            userKey = createUUID();\n            chrome.storage.sync.set({\n                zedremUserKey: userKey\n            });\n        }\n        currentSocketOptions = {\n            server: server,\n            userKey: userKey\n        };\n        editorSocket(currentSocketOptions);\n    });\n}\n\n\nfunction closeSocket() {\n    if (editorSocketConn) {\n        currentSocketOptions.status = 'disconnected';\n        if (reconnectTimeout) {\n            clearTimeout(reconnectTimeout);\n        }\n        if (pingInterval) {\n            clearInterval(pingInterval);\n        }\n        if (pongTimeout) {\n            clearTimeout(pongTimeout);\n        }\n        editorSocketConn.onclose = function() {};\n        editorSocketConn.close();\n    }\n}\n\nfunction editorSocket(zedremConfig) {\n    if (!zedremConfig.server) {\n        // You can disable connecting to zedrem by setting server to null or false\n        return;\n    }\n    console.log(\"Attempting to connect to\", zedremConfig.server + \"/editorsocket\");\n    editorSocketConn = new WebSocket(zedremConfig.server + '/editorsocket');\n    editorSocketConn.onopen = function() {\n        console.log(\"Connected to zedrem server!\");\n        currentSocketOptions.status = 'connected';\n        editorSocketConn.send(JSON.stringify({\n            version: \"1\",\n            UUID: zedremConfig.userKey\n        }));\n        timeOut = 2000;\n        pingInterval = setInterval(function() {\n            console.log(\"Ping\");\n            editorSocketConn.send(JSON.stringify({\n                type: \"ping\"\n            }));\n            pongTimeout = setTimeout(function() {\n                console.log(\"Ping timed out, reconnecting...\");\n                closeSocket();\n                initEditorSocket(zedremConfig.server);\n            }, 3000);\n        }, 5000);\n    };\n    editorSocketConn.onerror = function(err) {\n        console.error(\"Socket error\", err);\n    };\n    editorSocketConn.onmessage = function(e) {\n        var message = e.data;\n        try {\n            message = JSON.parse(message);\n            switch (message.type) {\n                case 'pong':\n                    clearTimeout(pongTimeout);\n                    pongTimeout = null;\n                    console.log(\"Got pong\");\n                    break;\n                case 'open':\n                    var url = zedremConfig.server.replace(\"ws://\", \"http://\").replace(\"wss://\", \"https://\") + \"/fs/\" + message.url;\n                    console.log(\"Now have ot open URL:\", url);\n                    openEditor(\"Remote\", url);\n                    break;\n            }\n        } catch (e) {\n            console.error(\"Couldn't deserialize:\", message, e);\n        }\n    };\n    editorSocketConn.onclose = function(e) {\n        console.log(\"Close\", e);\n        if (timeOut < 5 * 60 * 1000) { // 5 minutes max\n            timeOut *= 2;\n        }\n        closeSocket();\n        console.log(\"Socket closed, retrying in\", timeOut / 1000, \"seconds\");\n        reconnectTimeout = setTimeout(function() {\n            editorSocket(zedremConfig);\n        }, timeOut);\n    };\n}\n\nwindow.configZedrem = function(newServer) {\n    if (currentSocketOptions.server !== newServer) {\n        initEditorSocket(newServer);\n    }\n};\n\nvar openProjects = {}, ignoreClose = false;\n\nwindow.openProject = function(title, url) {\n    console.log(\"Going to open\", title, url);\n    if (openProjects[url]) {\n        var win = openProjects[url].win;\n        win.focus();\n        win.contentWindow.zed.services.editor.getActiveEditor().focus();\n    } else {\n        openEditor(title, url);\n    }\n};\n\nwindow.loadProject = window.openProject;\n\nwindow.registerWindow = function(title, url, win) {\n    if(!url) {\n        return;\n    }\n    openProjects[url] = {\n        win: win,\n        title: title,\n        lastFocus: new Date()\n    };\n    win.contentWindow.addEventListener('focus', function() {\n        openProjects[url].lastFocus = new Date();\n    });\n    win.onClosed.addListener(function() {\n        delete openProjects[url];\n        saveOpenWindows();\n    });\n    saveOpenWindows();\n};\n\nwindow.getOpenWindows = function() {\n    var wins = [];\n    Object.keys(openProjects).forEach(function(url) {\n        wins.push({\n            title: openProjects[url].title,\n            url: url,\n            lastFocus: openProjects[url].lastFocus\n        });\n    });\n    wins.sort(function(a, b) {\n        return a.lastFocus < b.lastFocus;\n    });\n    return wins;\n};\n\nwindow.closeAllWindows = function() {\n    ignoreClose = true;\n    for (var url in openProjects) {\n        openProjects[url].win.close();\n    }\n};\n\nwindow.getSocketOptions = function() {\n    return currentSocketOptions;\n};\n\nfunction saveOpenWindows() {\n    if (!ignoreClose) {\n        chrome.storage.local.set({\n            openWindows: window.getOpenWindows()\n        });\n    }\n}\n\nfunction restoreOpenWindows(e) {\n    var wins = window.getOpenWindows();\n    if (wins.length) return openProjects[wins[0].url].win.focus();\n    \n    ignoreClose = false;\n    console.log(\"On launched\", e);\n    chrome.storage.local.get(\"openWindows\", function(result) {\n        var openWindows = result.openWindows;\n        if (!openWindows || openWindows.length === 0) {\n            openWindows = [{\n                title: \"\",\n                url: \"\"\n            }];\n        }\n        openWindows.forEach(function(win) {\n            openEditor(win.title, win.url);\n        });\n    });\n}"]}