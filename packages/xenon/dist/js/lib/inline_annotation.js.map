{"version":3,"sources":["../../../src/js/lib/inline_annotation.js"],"names":["Anchor","global","ace","require","Range","InlineAnnotation","session","info","startAnchor","getDocument","row","column","endAnchor","endColumn","on","update","bind","marker","prototype","endPos","getPosition","range","fromPoints","removeMarker","addMarker","type","remove","detach","module","exports"],"mappings":";;AAAA;AACA,IAAIA,SAASC,OAAOC,GAAP,CAAWC,OAAX,CAAmB,YAAnB,EAAiCH,MAA9C;AACA,IAAII,QAAQH,OAAOC,GAAP,CAAWC,OAAX,CAAmB,WAAnB,EAAgCC,KAA5C;;AAEA,SAASC,gBAAT,CAA0BC,OAA1B,EAAmCC,IAAnC,EAAyC;AACrC,SAAKD,OAAL,GAAeA,OAAf;AACA,SAAKC,IAAL,GAAYA,IAAZ;AACA,SAAKC,WAAL,GAAmB,IAAIR,MAAJ,CAAWM,QAAQG,WAAR,EAAX,EAAkCF,KAAKG,GAAvC,EAA4CH,KAAKI,MAAjD,CAAnB;AACA,SAAKC,SAAL,GAAiB,IAAIZ,MAAJ,CAAWM,QAAQG,WAAR,EAAX,EAAkCF,KAAKG,GAAvC,EAA4CH,KAAKM,SAAL,GAAiB,CAA7D,CAAjB;AACA,SAAKL,WAAL,CAAiBM,EAAjB,CAAoB,QAApB,EAA8B,KAAKC,MAAL,CAAYC,IAAZ,CAAiB,IAAjB,CAA9B;AACA,SAAKJ,SAAL,CAAeE,EAAf,CAAkB,QAAlB,EAA4B,KAAKC,MAAL,CAAYC,IAAZ,CAAiB,IAAjB,CAA5B;AACA,SAAKC,MAAL,GAAc,IAAd;AACA,SAAKF,MAAL;AACH;;AAEDV,iBAAiBa,SAAjB,GAA6B;AACzBH,YAAQ,YAAW;AACf,YAAII,SAAS,KAAKP,SAAL,CAAeQ,WAAf,EAAb;AACA,YAAIC,QAAQjB,MAAMkB,UAAN,CAAiB,KAAKd,WAAL,CAAiBY,WAAjB,EAAjB,EAAiD;AACzDV,iBAAKS,OAAOT,GAD6C;AAEzDC,oBAAQQ,OAAOR,MAAP,GAAgB;AAFiC,SAAjD,CAAZ;AAIA,YAAI,KAAKM,MAAT,EAAiB;AACb,iBAAKX,OAAL,CAAaiB,YAAb,CAA0B,KAAKN,MAA/B;AACH;AACD,aAAKA,MAAL,GAAc,KAAKX,OAAL,CAAakB,SAAb,CAAuBH,KAAvB,EAA8B,sBAAsB,KAAKd,IAAL,CAAUkB,IAA9D,CAAd;AACH,KAXwB;AAYzBC,YAAQ,YAAW;AACf,aAAKlB,WAAL,CAAiBmB,MAAjB;AACA,aAAKf,SAAL,CAAee,MAAf;AACA,YAAI,KAAKV,MAAT,EAAiB;AACb,iBAAKX,OAAL,CAAaiB,YAAb,CAA0B,KAAKN,MAA/B;AACH;AACJ;AAlBwB,CAA7B;;AAqBAW,OAAOC,OAAP,GAAiBxB,gBAAjB","file":"inline_annotation.js","sourcesContent":["/* global ace, define*/\nvar Anchor = global.ace.require(\"ace/anchor\").Anchor;\nvar Range = global.ace.require(\"ace/range\").Range;\n\nfunction InlineAnnotation(session, info) {\n    this.session = session;\n    this.info = info;\n    this.startAnchor = new Anchor(session.getDocument(), info.row, info.column);\n    this.endAnchor = new Anchor(session.getDocument(), info.row, info.endColumn - 1);\n    this.startAnchor.on(\"change\", this.update.bind(this));\n    this.endAnchor.on(\"change\", this.update.bind(this));\n    this.marker = null;\n    this.update();\n}\n\nInlineAnnotation.prototype = {\n    update: function() {\n        var endPos = this.endAnchor.getPosition();\n        var range = Range.fromPoints(this.startAnchor.getPosition(), {\n            row: endPos.row,\n            column: endPos.column + 1\n        });\n        if (this.marker) {\n            this.session.removeMarker(this.marker);\n        }\n        this.marker = this.session.addMarker(range, \"marker-highlight-\" + this.info.type);\n    },\n    remove: function() {\n        this.startAnchor.detach();\n        this.endAnchor.detach();\n        if (this.marker) {\n            this.session.removeMarker(this.marker);\n        }\n    }\n};\n\nmodule.exports = InlineAnnotation;"]}