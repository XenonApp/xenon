{"version":3,"sources":["../../../../src/js/sandbox/zed/db.js"],"names":["module","exports","getMany","storeName","keyPaths","db","require","get","Promise","reject","store","readStore","all","map","bind","putMany","objs","writeStore","put","deleteMany","delete","getAll","options","query","apply","queryIndex","index","idx"],"mappings":"AAAA;;AAEAA,OAAOC,OAAP,GAAiB;AACbC,aAAS,UAASC,SAAT,EAAoBC,QAApB,EAA8B;AACnC,YAAIC,KAAKC,QAAQ,UAAR,EAAoBC,GAApB,EAAT;AACA,YAAG,CAACF,EAAJ,EAAQ;AACJ,mBAAOG,QAAQC,MAAR,CAAe,sBAAf,CAAP;AACH;AACD,YAAIC,QAAQL,GAAGM,SAAH,CAAaR,SAAb,CAAZ;AACA,eAAOK,QAAQI,GAAR,CAAYR,SAASS,GAAT,CAAaH,MAAMH,GAAN,CAAUO,IAAV,CAAeJ,KAAf,CAAb,CAAZ,CAAP;AACH,KARY;AASbK,aAAS,UAASZ,SAAT,EAAoBa,IAApB,EAA0B;AAC/B,YAAIX,KAAKC,QAAQ,UAAR,EAAoBC,GAApB,EAAT;AACA,YAAG,CAACF,EAAJ,EAAQ;AACJ,mBAAOG,QAAQC,MAAR,CAAe,sBAAf,CAAP;AACH;AACD,YAAIC,QAAQL,GAAGY,UAAH,CAAcd,SAAd,CAAZ;AACA,eAAOK,QAAQI,GAAR,CAAYI,KAAKH,GAAL,CAASH,MAAMQ,GAAN,CAAUJ,IAAV,CAAeJ,KAAf,CAAT,CAAZ,CAAP;AACH,KAhBY;AAiBbS,gBAAY,UAAShB,SAAT,EAAoBC,QAApB,EAA8B;AACtC,YAAIC,KAAKC,QAAQ,UAAR,EAAoBC,GAApB,EAAT;AACA,YAAG,CAACF,EAAJ,EAAQ;AACJ,mBAAOG,QAAQC,MAAR,CAAe,sBAAf,CAAP;AACH;AACD,YAAIC,QAAQL,GAAGY,UAAH,CAAcd,SAAd,CAAZ;AACA,eAAOK,QAAQI,GAAR,CAAYR,SAASS,GAAT,CAAaH,MAAMU,MAAN,CAAaN,IAAb,CAAkBJ,KAAlB,CAAb,CAAZ,CAAP;AACH,KAxBY;AAyBbW,YAAQ,UAASlB,SAAT,EAAoBmB,OAApB,EAA6B;AACjC,YAAIjB,KAAKC,QAAQ,UAAR,EAAoBC,GAApB,EAAT;AACA,YAAG,CAACF,EAAJ,EAAQ;AACJ,mBAAOG,QAAQC,MAAR,CAAe,sBAAf,CAAP;AACH;AACD,YAAIC,QAAQL,GAAGM,SAAH,CAAaR,SAAb,CAAZ;AACA,eAAOO,MAAMW,MAAN,CAAa,IAAb,EAAmBC,OAAnB,CAAP;AACH,KAhCY;AAiCbC,WAAO,UAASpB,SAAT,EAAoBoB,KAApB,EAA2B;AAC9B,YAAIlB,KAAKC,QAAQ,UAAR,EAAoBC,GAApB,EAAT;AACA,YAAG,CAACF,EAAJ,EAAQ;AACJ,mBAAOG,QAAQC,MAAR,CAAe,sBAAf,CAAP;AACH;AACD,YAAIC,QAAQL,GAAGM,SAAH,CAAaR,SAAb,CAAZ;AACA,eAAOO,MAAMa,KAAN,CAAYC,KAAZ,CAAkBd,KAAlB,EAAyBa,KAAzB,CAAP;AACH,KAxCY;AAyCbE,gBAAY,UAAStB,SAAT,EAAoBuB,KAApB,EAA2BH,KAA3B,EAAkC;AAC1C,YAAIlB,KAAKC,QAAQ,UAAR,EAAoBC,GAApB,EAAT;AACA,YAAG,CAACF,EAAJ,EAAQ;AACJ,mBAAOG,QAAQC,MAAR,CAAe,sBAAf,CAAP;AACH;AACD,YAAIkB,MAAMtB,GAAGM,SAAH,CAAaR,SAAb,EAAwBuB,KAAxB,CAA8BA,KAA9B,CAAV;AACA,eAAOC,IAAIJ,KAAJ,CAAUC,KAAV,CAAgBG,GAAhB,EAAqBJ,KAArB,CAAP;AACH;AAhDY,CAAjB","file":"db.js","sourcesContent":["'use strict';\n\nmodule.exports = {\n    getMany: function(storeName, keyPaths) {\n        var db = require(\"../../db\").get();\n        if(!db) {\n            return Promise.reject(\"DB not available yet\");\n        }\n        var store = db.readStore(storeName);\n        return Promise.all(keyPaths.map(store.get.bind(store)));\n    },\n    putMany: function(storeName, objs) {\n        var db = require(\"../../db\").get();\n        if(!db) {\n            return Promise.reject(\"DB not available yet\");\n        }\n        var store = db.writeStore(storeName);\n        return Promise.all(objs.map(store.put.bind(store)));\n    },\n    deleteMany: function(storeName, keyPaths) {\n        var db = require(\"../../db\").get();\n        if(!db) {\n            return Promise.reject(\"DB not available yet\");\n        }\n        var store = db.writeStore(storeName);\n        return Promise.all(keyPaths.map(store.delete.bind(store)));\n    },\n    getAll: function(storeName, options) {\n        var db = require(\"../../db\").get();\n        if(!db) {\n            return Promise.reject(\"DB not available yet\");\n        }\n        var store = db.readStore(storeName);\n        return store.getAll(null, options);\n    },\n    query: function(storeName, query) {\n        var db = require(\"../../db\").get();\n        if(!db) {\n            return Promise.reject(\"DB not available yet\");\n        }\n        var store = db.readStore(storeName);\n        return store.query.apply(store, query);\n    },\n    queryIndex: function(storeName, index, query) {\n        var db = require(\"../../db\").get();\n        if(!db) {\n            return Promise.reject(\"DB not available yet\");\n        }\n        var idx = db.readStore(storeName).index(index);\n        return idx.query.apply(idx, query);\n    },\n};\n"]}