{"version":3,"sources":["../../src/js/fs.js"],"names":["options","require","url","get","api","indexOf","watchSelf","readOnlyFn","WEBPACK","path","substring","length","dir","parts","split","webfsParts","webfsOpts","forEach","part","spl","decodeURIComponent","fullUrl","user","pass","keep","isConfig","module","exports"],"mappings":"AAAA;;AAEA,MAAMA,UAAUC,QAAQ,eAAR,CAAhB;AACA,MAAMC,MAAMF,QAAQG,GAAR,CAAY,KAAZ,CAAZ;;AAEA,IAAIC,GAAJ;;AAEA,IAAI,CAACF,GAAL,EAAU;AACNE,UAAMH,QAAQ,YAAR,GAAN;AACH,CAFD,MAEO,IAAIC,IAAIG,OAAJ,CAAY,WAAZ,MAA6B,CAAjC,EAAoC;AACvCD,UAAMH,QAAQ,aAAR,EAAuB,EAACK,WAAW,KAAZ,EAAvB,CAAN;AACH,CAFM,MAEA,IAAIJ,IAAIG,OAAJ,CAAY,SAAZ,MAA2B,CAA/B,EAAkC;AACrCD,UAAMH,QAAQ,aAAR,EAAuB;AACzBC,aAAK,QADoB;AAEzBK,oBAAY,YAAW;AACnB,mBAAO,IAAP;AACH;AAJwB,KAAvB,CAAN;AAMH,CAPM,MAOA,IAAI,CAACC,OAAD,IAAYN,IAAIG,OAAJ,CAAY,OAAZ,MAAyB,CAAzC,EAA4C;AAC/C,UAAMI,OAAOP,IAAIQ,SAAJ,CAAc,QAAQC,MAAtB,CAAb;AACA,QAAIF,IAAJ,EAAU;AACNL,cAAMH,QAAQ,WAAR,EAAqB;AACvBW,iBAAKH;AADkB,SAArB,CAAN;AAGH,KAJD,MAIO;AACH;AACH;AACJ,CATM,MASA;AACH,UAAMI,QAAQX,IAAIY,KAAJ,CAAU,GAAV,CAAd;AACA,QAAIC,aAAaF,MAAM,CAAN,IAAWA,MAAM,CAAN,EAASC,KAAT,CAAe,GAAf,CAAX,GAAiC,EAAlD;AACA,QAAIE,YAAY,EAAhB;;AAEAD,eAAWE,OAAX,CAAmB,UAASC,IAAT,EAAe;AAC9B,YAAIC,MAAMD,KAAKJ,KAAL,CAAW,GAAX,CAAV;AACAE,kBAAUG,IAAI,CAAJ,CAAV,IAAoBC,mBAAmBD,IAAI,CAAJ,CAAnB,CAApB;AACH,KAHD;AAIAf,UAAMH,QAAQ,UAAR,EAAoB;AACtBoB,iBAASnB,GADa;AAEtBA,aAAKW,MAAM,CAAN,CAFiB;AAGtBS,cAAMN,UAAUM,IAHM;AAItBC,cAAMP,UAAUO,IAJM;AAKtBC,cAAMR,UAAUQ;AALM,KAApB,CAAN;AAOH;;AAEDpB,IAAIqB,QAAJ,GAAe,KAAf;AACA,IAAIvB,IAAIG,OAAJ,CAAY,WAAZ,MAA6B,CAAjC,EAAoC;AAChCD,QAAIqB,QAAJ,GAAe,IAAf;AACH;;AAEDC,OAAOC,OAAP,GAAiBvB,GAAjB","file":"fs.js","sourcesContent":["'use strict';\n\nconst options = require(\"./lib/options\");\nconst url = options.get(\"url\");\n\nlet api;\n\nif (!url) {\n    api = require('./fs/empty')();\n} else if (url.indexOf(\"nwconfig:\") === 0) {\n    api = require(\"./fs/config\")({watchSelf: false});\n} else if (url.indexOf(\"manual:\") === 0) {\n    api = require('./fs/static')({\n        url: 'manual',\n        readOnlyFn: function() {\n            return true;\n        }\n    });\n} else if (!WEBPACK && url.indexOf(\"node:\") === 0) {\n    const path = url.substring(\"node:\".length);\n    if (path) {\n        api = require('./fs/node')({\n            dir: path\n        });\n    } else {\n        // TODO: re-open project picker - maybe only if path doesn't exist\n    }\n} else {\n    const parts = url.split('?');\n    var webfsParts = parts[1] ? parts[1].split(\"&\") : [];\n    var webfsOpts = {};\n\n    webfsParts.forEach(function(part) {\n        var spl = part.split('=');\n        webfsOpts[spl[0]] = decodeURIComponent(spl[1]);\n    });\n    api = require('./fs/web')({\n        fullUrl: url,\n        url: parts[0],\n        user: webfsOpts.user,\n        pass: webfsOpts.pass,\n        keep: webfsOpts.keep\n    });\n}\n\napi.isConfig = false;\nif (url.indexOf(\"nwconfig:\") === 0) {\n    api.isConfig = true;\n}\n\nmodule.exports = api;\n"]}