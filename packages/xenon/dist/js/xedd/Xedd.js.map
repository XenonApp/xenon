{"version":3,"sources":["../../../src/js/xedd/Xedd.jsx"],"names":["cache","localStore","Modal","Component","constructor","props","connect","e","preventDefault","state","url","indexOf","setState","hint","user","password","err","message","set","updateFiles","handleInput","input","target","value","path","files","back","paths","length","pop","unshift","title","key","push","render","display","flexDirection","height","flex","position","top","right","fontSize","onSelect","bind","width","marginRight","marginTop","color","Xedd"],"mappings":"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","file":"Xedd.js","sourcesContent":["import React from 'react';\nimport styled from 'styled-components';\nimport { getVersion, readDir } from './api';\nimport * as cache from '../cache';\nimport * as localStore from '../local_store';\nimport FileBrowser from './FileBrowser.jsx';\n\nclass Modal extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.paths = [];\n\n        this.state = {\n            url: 'http://localhost:7337',\n            user: '',\n            password: '',\n            hint: '',\n            files: []\n        };\n    }\n\n    connect = async (e) => {\n        e.preventDefault();\n        if (this.state.url.indexOf('http') !== 0) {\n            this.setState({ hint: 'The url must start with http' });\n        }\n        try {\n            await getVersion(this.state.url, this.state.user, this.state.password);\n        } catch(err) {\n            return this.setState({ hint: err.message });\n        }\n        cache.set('url', this.state.url);\n        cache.set('user', this.state.user);\n        cache.set('password', this.state.password);\n        await localStore.set('xedd', {\n            url: this.state.url,\n            user: this.state.user,\n            password: this.state.password\n        });\n        this.updateFiles('/');\n    };\n\n    handleInput = (input, e) => {\n        this.setState({ [input]: e.target.value });\n    };\n\n    updateFiles = async (path) => {\n        let files;\n        try {\n            files = await readDir(this.state.url, path, this.state.user, this.state.password);\n        } catch(err) {\n            return this.setState({ hint: err.message });\n        }\n\n        let back = false;\n        if (path === this.paths[this.paths.length - 2]) {\n            back = true;\n            this.paths.pop();\n        }\n\n        if (path !== '/') {\n            files.unshift({\n                title: '..',\n                key: 'back',\n                path: back ? this.paths[this.paths.length - 2] : this.paths[this.paths.length - 1]\n            });\n            if (!back) {\n                this.paths.push(path);\n            }\n        } else {\n            this.paths = ['/'];\n        }\n\n        this.setState({ files });\n    };\n\n    render() {\n        return (\n            <div style={{display: 'flex', flexDirection: 'column', height: '100%'}}>\n                <div style={{flex: '0 1 auto'}}>\n                    <img src=\"./img/zed-small.png\" className=\"logo\" />\n                    <h1>Setup Xedd Server and Select Configuration Directory</h1>\n                </div>\n                <div style={{position: 'absolute', top: '15px', right: '16px', fontSize: '14px'}}>\n                    <button>What is this?</button>\n                    <button onSelect={this.props.onSelect}>Cancel</button>\n                </div>\n                <form id=\"zedd-form\" style={{flex: '0 1 auto'}}>\n                    <input type=\"text\" onChange={this.handleInput.bind(this, 'url')} style={{width: '40%', marginRight: '5px'}} placeholder=\"URL\" value={this.state.url} />\n                    <input style={{marginTop: '2px', width: '20%', marginRight: '5px'}} type=\"text\" placeholder=\"Username\" onChange={this.handleInput.bind(this, 'user')} value={this.state.user} />\n                    <input style={{marginTop: '2px', width: '20%', marginRight: '5px'}} type=\"password\" placeholder=\"Password\" onChange={this.handleInput.bind(this, 'password')} value={this.state.password} />\n                    <button onClick={this.connect}>Connect</button>\n                    {this.state.hint ? <div style={{color: 'red'}}>{this.state.hint}</div> : null}\n                </form>\n                <FileBrowser files={this.state.files} onClick={this.updateFiles} onSelect={this.props.onSelect} />\n            </div>\n        );\n    }\n}\n\nexport default Xedd;\n"]}