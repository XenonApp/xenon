{"version":3,"sources":["../../../src/js/xedd/Modal.jsx"],"names":["cache","localStore","Modal","Component","constructor","props","connect","config","set","updateFiles","handleInput","input","e","setState","target","value","handleSelect","path","onSelect","url","user","password","files","err","hint","message","back","paths","length","pop","unshift","title","key","push","state","render","display","flexDirection","height","flex","position","top","right","fontSize"],"mappings":"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","file":"Modal.js","sourcesContent":["import React from 'react';\nimport { readDir } from './api';\nimport * as cache from '../cache';\nimport * as localStore from '../local_store';\nimport FileBrowser from './FileBrowser';\nimport Form from './Form';\n\nclass Modal extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.config = null;\n        this.paths = [];\n\n        this.state = {\n            files: []\n        };\n    }\n\n    connect = async (config) => {\n        this.config = config;\n        if (this.props.config) {\n            cache.set('xeddConfig', config);\n            await localStore.set('xeddConfig', config);\n        } else {\n            await localStore.set('xedd', config);\n        }\n        this.updateFiles('/');\n    };\n\n    handleInput = (input, e) => {\n        this.setState({ [input]: e.target.value });\n    };\n\n    handleSelect = (path) => {\n        this.props.onSelect({\n            url: this.config.url,\n            user: this.config.user,\n            password: this.config.password,\n            path: path\n        });\n    }\n\n    updateFiles = async (path) => {\n        let files;\n        try {\n            files = await readDir(this.config.url, path, this.config.user, this.config.password);\n        } catch(err) {\n            return this.setState({ hint: err.message });\n        }\n\n        let back = false;\n        if (path === this.paths[this.paths.length - 2]) {\n            back = true;\n            this.paths.pop();\n        }\n\n        if (path !== '/') {\n            files.unshift({\n                title: '..',\n                key: 'back',\n                path: back ? this.paths[this.paths.length - 2] : this.paths[this.paths.length - 1]\n            });\n            if (!back) {\n                this.paths.push(path);\n            }\n        } else {\n            this.paths = ['/'];\n        }\n\n        this.setState({ files });\n    };\n\n    render() {\n        return (\n            <div style={{display: 'flex', flexDirection: 'column', height: '100%'}}>\n                <div style={{flex: '0 1 auto'}}>\n                    <img src=\"./img/zed-small.png\" className=\"logo\" />\n                    { this.props.config ? <h1>Setup Xedd Server and Select Configuration Directory</h1> : <h1>Open Xedd Folder</h1> }\n                </div>\n                <div style={{position: 'absolute', top: '15px', right: '16px', fontSize: '14px'}}>\n                    <button>What is this?</button>\n                    <button onClick={this.props.onSelect}>Cancel</button>\n                </div>\n                <Form config={this.props.config} onConnect={this.connect} />\n                <FileBrowser files={this.state.files} onClick={this.updateFiles} onSelect={this.handleSelect} />\n            </div>\n        );\n    }\n}\n\nexport default Modal;\n"]}