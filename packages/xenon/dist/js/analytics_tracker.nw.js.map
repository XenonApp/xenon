{"version":3,"sources":["../../src/js/analytics_tracker.nw.js"],"names":["module","exports","config","request","require","localStorage","analyticsId","Date","now","Promise","resolve","version","getCurrentVersion","api","trackEvent","category","name","label","getPreference","uri","method","body","encodeURIComponent","err","console","error","json"],"mappings":"AAAA;;AAEAA,OAAOC,OAAP,GAAiB,UAASC,MAAT,EAAiB;AAC9B,QAAIC,UAAUC,QAAQ,SAAR,CAAd;AACA,QAAG,CAACC,aAAaC,WAAjB,EAA8B;AAC1BD,qBAAaC,WAAb,GAA2B,KAAKC,KAAKC,GAAL,EAAhC;AACH;;AAED,WAAO,IAAIC,OAAJ,CAAY,UAASC,OAAT,EAAkB;AACjC,YAAIC,UAAUC,mBAAd;AACA,YAAIC,MAAM;AACNC,wBAAY,UAASC,QAAT,EAAmBC,IAAnB,EAAyBC,KAAzB,EAAgC;AACxC,oBAAIf,OAAOgB,aAAP,CAAqB,iBAArB,MAA4C,KAAhD,EAAuD;AACnDf,4BAAQ;AACJgB,6BAAK,0CADD;AAEJC,gCAAQ,MAFJ;AAGJC,8BAAM,kCAAkCV,OAAlC,GAA4C,+BAA5C,GAA8EW,mBAAmBP,QAAnB,CAA9E,GAA6G,MAA7G,GAAsHO,mBAAmBN,IAAnB,CAAtH,GAAiJ,MAAjJ,GAA0JM,mBAAmBL,KAAnB,CAA1J,GAAsL,OAAtL,GAAgMZ,aAAaC;AAH/M,qBAAR,EAIG,UAASiB,GAAT,EAAc;AACb,4BAAGA,GAAH,EAAQ;AACJC,oCAAQC,KAAR,CAAc,UAAd,EAA0BF,GAA1B;AACH;AACJ,qBARD;AASH;AACJ;AAbK,SAAV;AAeAb,gBAAQG,GAAR;AACH,KAlBM,CAAP;AAmBH,CAzBD;;AA2BA,SAASD,iBAAT,GAA6B;AACzB,QAAIc,OAAOtB,QAAQ,oBAAR,CAAX;AACA,WAAOsB,KAAKf,OAAL,GAAe,KAAtB;AACH","file":"analytics_tracker.nw.js","sourcesContent":["'use strict';\n\nmodule.exports = function(config) {\n    var request = require(\"request\");\n    if(!localStorage.analyticsId) {\n        localStorage.analyticsId = \"\" + Date.now();\n    }\n\n    return new Promise(function(resolve) {\n        let version = getCurrentVersion();\n        var api = {\n            trackEvent: function(category, name, label) {\n                if (config.getPreference(\"enableAnalytics\") !== false) {\n                    request({\n                        uri: \"https://www.google-analytics.com/collect\",\n                        method: 'POST',\n                        body: \"t=event&_v=ca3&v=1&an=zed&av=\" + version + \"&tid=UA-58112-11&ul=en-US&ec=\" + encodeURIComponent(category) + \"&ea=\" + encodeURIComponent(name) + \"&el=\" + encodeURIComponent(label) + \"&cid=\" + localStorage.analyticsId\n                    }, function(err) {\n                        if(err) {\n                            console.error(\"GA error\", err);\n                        }\n                    });\n                }\n            }\n        };\n        resolve(api);\n    });\n};\n\nfunction getCurrentVersion() {\n    let json = require(\"../../package.json\");\n    return json.version + \"-nw\";\n}\n"]}