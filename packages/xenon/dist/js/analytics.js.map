{"version":3,"sources":["../../src/js/analytics.js"],"names":["eventbus","require","tracker","api","hook","on","newSession","then","trackEvent","mode","language","loadedFileList","configLoaded","phrase","edit","session","cmd","module","exports"],"mappings":"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","file":"analytics.js","sourcesContent":["\"use strict\";\n\nconst eventbus = require('./eventbus');\nconst tracker = require('./analytics_tracker');\n\nvar api = {\n    hook: function() {\n        eventbus.on(\"newsession\", function(newSession) {\n            tracker.then(tracker => tracker.trackEvent(\"Editor\", \"OpenWithMode\", newSession.mode.language));\n        });\n\n        var loadedFileList = false;\n\n        eventbus.on(\"loadedfilelist\", function() {\n            if (loadedFileList) {\n                // Only interested in seeing if people reload\n                // explicitly\n                tracker.then(tracker => tracker.trackEvent(\"Editor\", \"LoadedFileList\"));\n            }\n            loadedFileList = true;\n        });\n\n        var configLoaded = false;\n\n        eventbus.on(\"configchanged\", function() {\n            if (configLoaded) {\n                // Only interested in seeing that people actually\n                // change their config\n                tracker.then(tracker => tracker.trackEvent(\"Editor\", \"ConfigChanged\"));\n            }\n            configLoaded = true;\n        });\n\n        eventbus.on(\"goto\", function(phrase) {\n            if (phrase[0] === \"/\") {\n                tracker.then(tracker => tracker.trackEvent(\"Editor\", \"Goto\", \"FullPath\"));\n            } else if (phrase[0] === \":\" && phrase[1] === \"/\") {\n                tracker.then(tracker => tracker.trackEvent(\"Editor\", \"Goto\", \"FindInFile\"));\n            } else if (phrase[0] === \":\" && phrase[1] === \"@\") {\n                tracker.then(tracker => tracker.trackEvent(\"Editor\", \"Goto\", \"LocalSymbol\"));\n            } else if (phrase[0] === \":\") {\n                tracker.then(tracker => tracker.trackEvent(\"Editor\", \"Goto\", \"Line\"));\n            } else if (phrase[0] === \"@\") {\n                tracker.then(tracker => tracker.trackEvent(\"Editor\", \"Goto\", \"ProjectSymbol\"));\n            } else {\n                tracker.then(tracker => tracker.trackEvent(\"Editor\", \"Goto\", \"FilePattern\"));\n            }\n        });\n\n        eventbus.on(\"complete\", function(edit) {\n            tracker.then(tracker => tracker.trackEvent(\"Editor\", \"Complete\", edit.session.mode.language));\n        });\n\n        eventbus.on(\"tree\", function() {\n            tracker.then(tracker => tracker.trackEvent(\"Editor\", \"Tree\"));\n        });\n\n        eventbus.on(\"commandtree\", function() {\n            tracker.then(tracker => tracker.trackEvent(\"Editor\", \"CommandTree\"));\n        });\n\n        eventbus.on(\"executedcommand\", function(cmd) {\n            tracker.then(tracker => tracker.trackEvent(\"Editor\", \"ExecuteCommand\", cmd));\n        });\n    }\n};\n\nmodule.exports = api;\n"]}